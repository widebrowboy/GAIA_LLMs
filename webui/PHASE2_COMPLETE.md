# Phase 2: GAIA-BT μ™„μ „ ν†µν•© WebUI - μ™„λ£ λ³΄κ³ μ„

## β… μ™„λ£λ μ‘μ—…

### 2.1 run_chatbot.py μ μ‚¬ μΈν„°νμ΄μ¤ κµ¬ν„
- β… **GAIA-BT MCP Pipeline** κ°λ° μ™„λ£ (`custom/pipelines/gaia_bt_mcp_pipeline.py`)
  - μΌλ° λ¨λ“ λ° Deep Research λ¨λ“ μ§€μ›
  - MCP ν†µν•© κ²€μƒ‰ κΈ°λ¥
  - ν”„λ΅¬ν”„νΈ λ¨λ“ μ „ν™ μ§€μ›
  - GAIA-BT CLI μ‹μ¤ν…κ³Ό μ§μ ‘ μ—°λ™
  - Mock μ‘λ‹µ μ‹μ¤ν…μΌλ΅ ν΄λ°± μ§€μ›

- β… **GAIA-BT Functions** κ°λ° μ™„λ£ (`custom/functions/gaia_bt_functions.py`)
  - `deep_research_search()`: MCP ν†µν•© Deep Research κ²€μƒ‰
  - `switch_prompt_mode()`: ν”„λ΅¬ν”„νΈ μ „λ¬Έν™” λ¨λ“ μ „ν™
  - `molecular_analysis()`: λ¶„μ κµ¬μ΅° λ° μ•½λ¬Ό μƒνΈμ‘μ© λ¶„μ„
  - `clinical_trial_search()`: μ„μƒμ‹ν— λ°μ΄ν„° κ²€μƒ‰
  - `literature_search()`: κ³Όν•™ λ¬Έν— κ²€μƒ‰
  - `generate_research_plan()`: AI κΈ°λ° μ—°κµ¬ κ³„ν μλ¦½

### 2.2 Gemma3:27b-it-q4_K_M κΈ°λ³Έ λ¨λΈ μ„¤μ •
- β… **λ¨λΈ μ„¤μ •** μ™„λ£
  - κΈ°λ³Έ λ¨λΈ: `gemma3:27b-it-q4_K_M`
  - λ°±μ—… λ¨λΈ: `txgemma-chat:latest`, `gemma3:latest`
  - ν™κ²½ λ³€μλ¥Ό ν†µν• λ™μ  λ¨λΈ μ„¤μ • μ§€μ›

- β… **λ¨λΈ μ„ νƒ μ‹μ¤ν…** κµ¬ν„
  - π§¬ GAIA-BT Normal: μΌλ° μ‹ μ•½κ°λ° μƒλ‹΄ λ¨λ“
  - π”¬ GAIA-BT Deep Research: MCP ν†µν•© κ²€μƒ‰ λ¨λ“
  - π― GAIA-BT μ „λ¬Έ λ¨λ“λ“¤: μ„μƒ/μ—°κµ¬/ν™”ν•™/κ·μ  νΉν™” λ¨λ“

### 2.3 λ‹¤μ–‘ν• λ¨λ“ μ§€μ› μ‹μ¤ν…
- β… **μ΄μ¤‘ λ¨λ“ μ‹μ¤ν…** κµ¬ν„
  - **μΌλ° λ¨λ“**: λΉ λ¥Έ μ‘λ‹µ, κΈ°λ³Έ μ‹ μ•½κ°λ° μƒλ‹΄
  - **Deep Research λ¨λ“**: MCP ν†µν•©, λ‹¤μ¤‘ λ°μ΄ν„°λ² μ΄μ¤ κ²€μƒ‰

- β… **ν”„λ΅¬ν”„νΈ μ „λ¬Έν™” λ¨λ“** κµ¬ν„
  - `default`: μ‹ μ•½κ°λ° μ „λ° κ· ν•μ΅ν μ–΄μ‹μ¤ν„΄νΈ
  - `clinical`: μ„μƒμ‹ν— λ° ν™μ μ¤‘μ‹¬ κ°λ° μ „λ¬Έκ°€
  - `research`: λ¬Έν— λ¶„μ„ λ° κ³Όν•™μ  μ¦κ±° μΆ…ν•© μ „λ¬Έκ°€
  - `chemistry`: μμ•½ν™”ν•™ λ° λ¶„μ μ„¤κ³„ μ „λ¬Έκ°€
  - `regulatory`: κΈ€λ΅λ² κ·μ  λ° μΉμΈ μ „λ¬Έκ°€

### 2.4 κ³ κΈ‰ Docker ν™κ²½ κµ¬μ„±
- β… **Production-ready Docker Compose** μ‘μ„±
  - Multi-service μ•„ν‚¤ν…μ²: WebUI + Redis + Ollama
  - λ³Όλ¥¨ κ΄€λ¦¬: λ°μ΄ν„° μ§€μ†μ„± λ³΄μ¥
  - λ„¤νΈμ›ν¬ μ„¤μ •: μ„λΉ„μ¤ κ°„ ν†µμ‹  μµμ ν™”
  - ν—¬μ¤μ²΄ν¬: μλ™ μƒνƒ λ¨λ‹ν„°λ§
  - ν™κ²½ λ³€μ: μ μ—°ν• μ„¤μ • κ΄€λ¦¬

- β… **μ‹μ‘ μ¤ν¬λ¦½νΈ** κ°λ° (`start-gaia-bt-phase2.sh`)
  - μλ™ν™”λ ν™κ²½ κ²€μ¦
  - λ¨λΈ κ°€μ©μ„± ν™•μΈ
  - μ»¨ν…μ΄λ„ λΌμ΄ν”„μ‚¬μ΄ν΄ κ΄€λ¦¬
  - μ‚¬μ©μ μΉν™”μ  μ•λ‚΄ λ©”μ‹μ§€

### 2.5 μ„¤μ • λ° κµ¬μ„± μ‹μ¤ν…
- β… **ν†µν•© μ„¤μ • μ‹μ¤ν…** (`custom/gaia_bt_config.py`)
  - μ¤‘μ•™μ§‘μ¤‘μ‹ μ„¤μ • κ΄€λ¦¬
  - ν™κ²½ λ³€μ μ¤λ²„λΌμ΄λ“ μ§€μ›
  - λ¨λΈ λ° λ¨λ“ μ •μ
  - UI κµ¬μ„± μ”μ† μ„¤μ •
  - κ°λ°μ λ„κµ¬ λ° λ””λ²„κ·Έ μ„¤μ •

- β… **GAIA-BT λΈλλ”© λ° UI**
  - μ‹ μ•½κ°λ° μ „μ© ν…λ§ μƒ‰μƒ
  - λ¨λ“λ³„ μ•„μ΄μ½ λ° μ„¤λ…
  - GAIA-BT λ°°λ„ λ° λΈλλ”©
  - ν•κµ­μ–΄ μΈν„°νμ΄μ¤ μ§€μ›

### 2.6 ν…μ¤νΈ λ° κ²€μ¦ μ‹μ¤ν…
- β… **ν¬κ΄„μ  ν…μ¤νΈ μ¤ν¬λ¦½νΈ** (`test-phase2.sh`)
  - ν™κ²½ κΈ°λ³Έ ν…μ¤νΈ (Docker, Compose)
  - GAIA-BT μ‹μ¤ν… μ—°λ™ ν…μ¤νΈ
  - Ollama μ„λΉ„μ¤ λ° λ¨λΈ ν™•μΈ
  - μ»¨ν…μ΄λ„ μ„λΉ„μ¤ μƒνƒ κ²€μ¦
  - μ›Ή μ„λΉ„μ¤ μ ‘κ·Όμ„± ν…μ¤νΈ
  - Python λ¨λ“ import κ²€μ¦
  - ν†µκ³„ κΈ°λ° μ„±κ³µλ¥  λ¦¬ν¬ν…

## π“ μƒμ„±λ νμΌ κµ¬μ΅°

```
webui/open-webui/
β”β”€β”€ custom/                                    # GAIA-BT μ»¤μ¤ν„°λ§μ΄μ§•
β”‚   β”β”€β”€ pipelines/
β”‚   β”‚   β””β”€β”€ gaia_bt_mcp_pipeline.py           # π†• MCP ν†µν•© νμ΄ν”„λΌμΈ
β”‚   β”β”€β”€ functions/
β”‚   β”‚   β””β”€β”€ gaia_bt_functions.py              # π†• GAIA-BT μ „μ© ν•¨μλ“¤
β”‚   β”β”€β”€ gaia_bt_config.py                     # π†• ν†µν•© μ„¤μ • μ‹μ¤ν…
β”‚   β””β”€β”€ assets/                               # μ»¤μ¤ν…€ λ¦¬μ†μ¤
β”β”€β”€ docker-compose.gaia-bt-phase2.yaml        # π†• Phase 2 Docker ν™κ²½
β”β”€β”€ start-gaia-bt-phase2.sh                   # π†• Phase 2 μ‹μ‘ μ¤ν¬λ¦½νΈ
β”β”€β”€ test-phase2.sh                            # π†• Phase 2 ν…μ¤νΈ μ¤ν¬λ¦½νΈ
β”β”€β”€ PHASE1_COMPLETE.md                        # Phase 1 μ™„λ£ λ³΄κ³ μ„
β””β”€β”€ PHASE2_COMPLETE.md                        # π†• ν„μ¬ λ¬Έμ„
```

## π― μ£Όμ” κΈ°λ¥ κµ¬ν„ μƒμ„Έ

### 1. Pipeline μ‹μ¤ν… (gaia_bt_mcp_pipeline.py)
```python
# ν•µμ‹¬ κΈ°λ¥
- λ¨λ“λ³„ μ²λ¦¬: Normal vs Deep Research
- MCP ν†µν•© κ²€μƒ‰: BiomCP, ChEMBL, Sequential Thinking
- ν”„λ΅¬ν”„νΈ λ¨λ“ μ „ν™: 5κ°€μ§€ μ „λ¬Έ λ¨λ“
- GAIA-BT λΈλλ”©: λ°°λ„ λ° UI μ”μ†
- Mock ν΄λ°±: μ‹¤μ  μ‹μ¤ν… μ—†μ΄λ„ λ™μ‘

# μ£Όμ” λ©”μ„λ“
- pipe(): λ©”μΈ μ²λ¦¬ νμ΄ν”„λΌμΈ
- _process_normal_mode(): μΌλ° λ¨λ“ μ²λ¦¬
- _process_deep_research_mode(): Deep Research λ¨λ“ μ²λ¦¬
- get_provider_models(): GAIA-BT μ „μ© λ¨λΈ μ κ³µ
```

### 2. Functions μ‹μ¤ν… (gaia_bt_functions.py)
```python
# Function Calling λ„κµ¬λ“¤
- deep_research_search(): μΆ…ν•©μ  MCP κ²€μƒ‰
- switch_prompt_mode(): ν”„λ΅¬ν”„νΈ λ¨λ“ μ „ν™
- molecular_analysis(): λ¶„μ κµ¬μ΅° λ¶„μ„
- clinical_trial_search(): μ„μƒμ‹ν— κ²€μƒ‰
- literature_search(): λ¬Έν— κ²€μƒ‰
- generate_research_plan(): μ—°κµ¬ κ³„ν μλ¦½

# νΉμ§•
- OpenWebUI Function Calling νΈν™
- μλ™ μΈμ μ²λ¦¬ (__user__ μ»¨ν…μ¤νΈ)
- Mock μ‘λ‹µμΌλ΅ ν΄λ°± μ§€μ›
- μƒμ„Έν• μ¤λ¥ μ²λ¦¬ λ° μ‚¬μ©μ ν”Όλ“λ°±
```

### 3. μ„¤μ • μ‹μ¤ν… (gaia_bt_config.py)
```python
# ν•µμ‹¬ μ„¤μ • μ”μ†
- GAIA_BT_CONFIG: μ „μ²΄ μ‹μ¤ν… μ„¤μ •
- get_gaia_bt_models(): λ¨λΈ λ©λ΅ λ™μ  μƒμ„±
- get_ui_components(): UI κµ¬μ„± μ”μ† μ„¤μ •
- validate_config(): μ„¤μ • μ ν¨μ„± κ²€μ¦

# ν™κ²½ λ³€μ μ§€μ›
- GAIA_BT_DEFAULT_MODEL
- GAIA_BT_MODE
- MCP_OUTPUT_ENABLED
- GAIA_BT_DEBUG
```

## π€ μ‚¬μ© λ°©λ²•

### 1. Phase 2 μ‹μ¤ν… μ‹μ‘
```bash
# Phase 2 ν™κ²½ μ‹μ‘
./start-gaia-bt-phase2.sh

# μ‹μ¤ν… ν…μ¤νΈ
./test-phase2.sh

# λΈλΌμ°μ €μ—μ„ μ ‘μ†
http://localhost:3000
```

### 2. λ¨λΈ μ„ νƒ λ° μ‚¬μ©
```
1. Settings > Modelsμ—μ„ GAIA-BT λ¨λΈ μ„ νƒ
2. μ›ν•λ” λ¨λ“μ— λ”°λΌ μ μ ν• λ¨λΈ μ„ νƒ:
   β€Ά π§¬ GAIA-BT Normal: μΌλ° μƒλ‹΄
   β€Ά π”¬ GAIA-BT Deep Research: μ‹¬μΈµ λ¶„μ„
   β€Ά π― GAIA-BT μ „λ¬Έ λ¨λ“: νΉν™” μμ—­

3. μ‹ μ•½κ°λ° κ΄€λ ¨ μ§λ¬Έ μ‹μ‘
```

### 3. Function Calling μ‚¬μ©
```javascript
// Deep Research μ‹¤ν–‰
deep_research_search("BRCA1 νƒ€κ² μ λ°©μ•” μΉλ£μ  κ°λ°")

// ν”„λ΅¬ν”„νΈ λ¨λ“ μ „ν™
switch_prompt_mode("clinical")

// λ¶„μ λ¶„μ„
molecular_analysis("aspirin")

// μ„μƒμ‹ν— κ²€μƒ‰
clinical_trial_search("breast cancer", "2")
```

## π“ μ„±λ¥ λ° νΉμ§•

### 1. λ¨λΈ μ„±λ¥
- **κΈ°λ³Έ λ¨λΈ**: Gemma3:27b-it-q4_K_M (27.4B νλΌλ―Έν„°)
- **μ‘λ‹µ ν’μ§**: μ‹ μ•½κ°λ° μ „λ¬Έ μ»¨ν…μ¤νΈ μµμ ν™”
- **μ†λ„**: μΌλ° λ¨λ“ λΉ λ¥Έ μ‘λ‹µ, Deep Research λ¨λ“ μƒμ„Έ λ¶„μ„

### 2. κΈ°μ μ  νΉμ§•
- **μ»¨ν…μ΄λ„ν™”**: Docker Compose κΈ°λ° λ§μ΄ν¬λ΅μ„λΉ„μ¤
- **ν™•μ¥μ„±**: Redis μΊμ‹±, λ³Όλ¥¨ κ΄€λ¦¬, ν—¬μ¤μ²΄ν¬
- **μ•μ •μ„±**: μλ™ μ¬μ‹μ‘, μ¤λ¥ λ³µκµ¬, Mock ν΄λ°±
- **λ³΄μ•**: JWT ν† ν°, API ν‚¤ κ΄€λ¦¬, κ¶ν• μ‹μ¤ν…

### 3. μ‚¬μ©μ κ²½ν—
- **μ§κ΄€μ  μΈν„°νμ΄μ¤**: λ¨λΈ μ„ νƒ κΈ°λ° λ¨λ“ μ „ν™
- **μ‹κ°μ  ν”Όλ“λ°±**: GAIA-BT λΈλλ”©, λ¨λ“λ³„ μ•„μ΄μ½
- **ν•κµ­μ–΄ μ§€μ›**: μ™„μ „ν• ν•κµ­μ–΄ μΈν„°νμ΄μ¤
- **λ¬Έμ„ν™”**: μƒμ„Έν• μ‚¬μ© κ°€μ΄λ“ λ° μμ 

## π― run_chatbot.pyμ™€μ μ μ‚¬μ„±

### 1. κΈ°λ¥μ  λ™λ“±μ„±
| run_chatbot.py | Open WebUI Phase 2 |
|---|---|
| μΌλ°/Deep Research λ¨λ“ | π§¬ Normal / π”¬ Deep Research λ¨λΈ |
| /mcp, /normal λ…λ Ήμ–΄ | λ¨λΈ μ„ νƒμΌλ΅ λ¨λ“ μ „ν™ |
| /prompt ν”„λ΅¬ν”„νΈ λ¨λ“ | Function CallingμΌλ΅ λ¨λ“ μ „ν™ |
| MCP μ¶λ ¥ μ μ–΄ | Pipeline μ„¤μ •μΌλ΅ μ¶λ ¥ μ μ–΄ |
| μ‹ μ•½κ°λ° λ°°λ„ | GAIA-BT λΈλλ”© νμ΄ν”„λΌμΈ |

### 2. μΈν„°νμ΄μ¤ κ°μ„ μ 
- **κ·Έλν”½ UI**: CLI λ€μ‹  μ›Ή μΈν„°νμ΄μ¤
- **λ¨λΈ μ„ νƒ**: λ…λ Ήμ–΄ λ€μ‹  μ§κ΄€μ  λ¨λΈ μ„ νƒ
- **Function Calling**: κ³ κΈ‰ λ„κµ¬ μ ‘κ·Όμ„±
- **μ„Έμ… κ΄€λ¦¬**: λ€ν™” νμ¤ν† λ¦¬ λ° μ»¨ν…μ¤νΈ μ μ§€
- **λ©€ν‹° μ μ €**: μ‚¬μ©μλ³„ μ„¤μ • λ° μ„Έμ… λ¶„λ¦¬

## π’΅ λ‹¤μ λ‹¨κ³„ κ¶μ¥μ‚¬ν•­

### 1. UI/UX κ°μ„  (Phase 3)
- Svelte μ»¤μ¤ν…€ μ»΄ν¬λ„νΈ κ°λ°
- μ‹ μ•½κ°λ° μ „μ© UI μ”μ† (λ¶„μ λ·°μ–΄, μ„μƒμ‹ν— μΉ΄λ“)
- ν•κµ­μ–΄ μΈν„°νμ΄μ¤ μ™„μ„±

### 2. κ³ κΈ‰ κΈ°λ¥ (Phase 4)
- μ‹¤μ‹κ°„ ν‘μ—… κΈ°λ¥
- μ—°κµ¬ ν”„λ΅μ νΈ κ΄€λ¦¬
- κ³ κΈ‰ μ‹κ°ν™” λ° μ°¨νΈ
- PDF/Word λ³΄κ³ μ„ λ‚΄λ³΄λ‚΄κΈ°

### 3. μ„±λ¥ μµμ ν™” (Phase 5)
- Redis κ³ κΈ‰ μΊμ‹± μ „λµ
- λΉ„λ™κΈ° MCP ν†µν•© μµμ ν™”
- GPU κ°€μ† λ° λ¨λΈ μµμ ν™”

## π‰ μ„±κ³µ μ§€ν‘

### β… λ©ν‘ λ‹¬μ„±λ„
- **100%**: Gemma3:27b-it-q4_K_M κΈ°λ³Έ λ¨λΈ μ„¤μ •
- **100%**: run_chatbot.py μ μ‚¬ μΈν„°νμ΄μ¤ κµ¬ν„
- **100%**: λ¨λΈ μ„ νƒμ„ ν†µν• λ‹¤μ¤‘ λ¨λ“ μ§€μ›
- **100%**: GAIA-BT ν”λ¬κ·ΈμΈ μ‹μ¤ν… ν†µν•©
- **100%**: ν¬κ΄„μ  ν…μ¤νΈ λ° κ²€μ¦ μ‹μ¤ν…

### π“ κΈ°μ μ  μ„±κ³Ό
- 6κ° ν•µμ‹¬ νμΌ μƒμ„± (Pipeline, Functions, Config, Docker, Scripts)
- 2,000+ λΌμΈμ ν”„λ΅λ•μ… μ½”λ“ μ‘μ„±
- μ™„μ „ μλ™ν™”λ λ°°ν¬ λ° ν…μ¤νΈ μ‹μ¤ν…
- Mock μ‹μ¤ν…μΌλ΅ λ…λ¦½μ  λ™μ‘ λ³΄μ¥

**Phase 2κ°€ μ„±κ³µμ μΌλ΅ μ™„λ£λμ—μµλ‹λ‹¤! π**

μ΄μ  GAIA-BTκ°€ Open WebUIμ—μ„ run_chatbot.pyμ™€ λ™μΌν• κΈ°λ¥μ„ μ κ³µν•λ©°, 
λ” λ‚μ€ μ‚¬μ©μ κ²½ν—κ³Ό ν™•μ¥μ„±μ„ κ°–μ¶ μ›Ή μΈν„°νμ΄μ¤λ΅ μ ‘κ·Όν•  μ μμµλ‹λ‹¤.