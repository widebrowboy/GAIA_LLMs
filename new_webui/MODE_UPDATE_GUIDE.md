# 🔄 모드 선택 및 MCP 연동 업데이트 가이드

## ✅ 완료된 업데이트

### 🎯 모드 선택 간소화
**Before (4개 모드)**: Normal | Deep Research | Clinical Analysis | Molecular Design  
**After (2개 모드)**: **Normal** | **Deep Research**

### 📊 시스템 상태 표시 강화
새로 추가된 MCP 서버 상태 표시:
```
📊 시스템 상태
├─ Ollama 서버: 온라인/오프라인
├─ 모델: 활성화
├─ MCP 서버: 연결됨/연결 안됨  ← 새로 추가
└─ 세션: session_1234567890
```

## 🎯 새로운 2-모드 시스템

### 1. Normal 모드 💬
**특징:**
- 신약개발 기본 AI 응답
- 빠른 처리 시간
- 교육 및 기본 상담용

**시스템 프롬프트:**
> "당신은 신약개발 전문 AI 어시스턴트입니다. 사용자의 질문에 대해 명확하고 실용적인 답변을 제공해주세요."

**추천 질문:**
- 🧪 신약개발 기초: "신약개발의 기본 과정을 쉽게 설명해주세요."
- 💊 임상시험이란?: "임상시험이 왜 필요하고 어떻게 진행되나요?"
- ⚗️ 약물 작용원리: "약물이 우리 몸에서 어떻게 작용하나요?"
- 🏥 FDA 승인과정: "신약이 승인받는 과정을 알려주세요."

### 2. Deep Research 모드 🔬
**특징:**
- MCP 서버 연동 시: 논문, 임상시험 데이터 기반 심층 분석
- MCP 서버 미연결 시: AI 중심 고품질 분석
- 연구 및 전문가용

**시스템 프롬프트:**
> "당신은 신약개발 연구 전문가입니다. 과학적 근거를 바탕으로 심층적인 분석을 제공해주세요. 연구 배경, 핵심 발견사항, 실용적 제안을 포함하여 포괄적으로 답변해주세요."

**추천 질문:**
- 🔬 mRNA 백신 연구: "mRNA 백신 기술의 최신 연구 동향과 신약개발 적용 가능성을 분석해주세요."
- 🧬 항암제 저항성: "항암제 저항성 극복을 위한 최신 연구 현황과 해결 방안을 분석해주세요."
- 🎯 정밀의학 동향: "정밀의학 기반 신약개발의 현황과 미래 전망을 분석해주세요."
- 🔬 AI 신약개발: "AI와 머신러닝을 활용한 신약개발의 최신 동향과 성과를 분석해주세요."

## 🔌 MCP 서버 연동 상태 표시

### MCP 서버 연결됨 ✅
```
Deep Research 모드: MCP 서버 연동으로 논문, 임상시험 데이터를 활용한 심층 분석을 제공합니다.
```

### MCP 서버 연결 안됨 ⚠️
```
Deep Research 모드: MCP 서버가 연결되지 않아 AI 중심 분석을 제공합니다. 
완전한 기능을 위해서는 MCP 서버 연결이 필요합니다.
```

## 📍 사용자 인터페이스 개선

### 1. 실시간 상태 표시
- **사이드바**: 📊 시스템 상태에서 MCP 서버 상태 확인
- **메인 영역**: 모드별 안내 메시지에서 MCP 연동 상태 표시
- **🔄 서버 상태 확인**: 한 번의 클릭으로 Ollama + MCP 상태 동시 업데이트

### 2. 모드별 차별화된 UI
#### Normal 모드
- 💬 파란색 정보 박스
- 기본적인 추천 질문 (기초 개념 중심)

#### Deep Research 모드
- **MCP 연결됨**: 💬 파란색 정보 박스
- **MCP 연결 안됨**: ⚠️ 노란색 경고 박스
- 고급 추천 질문 (최신 연구 동향 중심)

### 3. 기존 사용자 마이그레이션
기존 4개 모드 사용자는 자동으로 매핑됩니다:
- **Normal** → **Normal** (변경 없음)
- **Deep Research** → **Deep Research** (변경 없음)
- **Clinical Analysis** → **Deep Research** (자동 전환)
- **Molecular Design** → **Deep Research** (자동 전환)

## 🔧 MCP 서버 연결 확인 및 해결

### 1. 현재 MCP 상태 확인
```bash
# MCP 프로세스 확인
pgrep -f mcp

# MCP 서버 HTTP 확인
curl http://localhost:8080/health
```

### 2. MCP 서버 시작 (필요시)
```bash
# GAIA-BT MCP 서버 시작
cd /home/gaia-bt/workspace/GAIA_LLMs
./scripts/run_mcp_servers.sh
```

### 3. 웹 인터페이스에서 확인
1. 사이드바 → "🔄 서버 상태 확인" 버튼 클릭
2. 📊 시스템 상태에서 "MCP 서버: 연결됨" 확인
3. Deep Research 모드 선택 시 파란색 안내 메시지 확인

## 🎯 사용 권장사항

### Normal 모드 추천 상황
- 신약개발 입문자나 학습자
- 빠른 답변이 필요한 경우
- 기본적인 개념 설명이 필요한 경우
- 일반적인 상담 및 질의응답

### Deep Research 모드 추천 상황
- 연구자, 개발자, 전문가
- 최신 연구 동향 분석이 필요한 경우
- 논문 기반 근거가 필요한 경우
- 복잡한 연구 질문 및 분석

### MCP 연동 시 추가 혜택
- **PubMed 논문 검색**: 최신 연구 결과 접근
- **ClinicalTrials.gov**: 임상시험 현황 분석
- **DrugBank**: 약물 정보 데이터베이스
- **ChEMBL**: 생물학적 활성 데이터

## 📱 업데이트된 사용법

### 1. 첫 접속 시
1. **http://localhost:8502** 접속
2. 사이드바에서 **MCP 서버 상태** 확인
3. 필요에 따라 **모드 선택** (Normal/Deep Research)
4. **추천 질문** 또는 **직접 입력**으로 시작

### 2. MCP 서버 연결이 필요한 경우
1. 터미널에서 MCP 서버 시작
2. 사이드바 **"🔄 서버 상태 확인"** 클릭
3. **Deep Research 모드**로 전환
4. 파란색 안내 메시지 확인 후 사용

## 🎉 업데이트 요약

### ✅ 개선된 점
- **간소화된 모드 선택**: 4개 → 2개 모드
- **명확한 MCP 상태 표시**: 실시간 연결 상태 확인
- **모드별 최적화된 질문**: 용도에 맞는 추천 질문
- **직관적인 UI**: 상태에 따른 색상 구분
- **자동 마이그레이션**: 기존 사용자 편의성 보장

### 🎯 사용자 혜택
- **명확한 선택**: Normal vs Deep Research 구분 명확
- **실시간 피드백**: MCP 연동 상태 즉시 확인
- **최적화된 경험**: 모드별 특화된 기능 활용
- **손쉬운 전환**: 한 번의 클릭으로 모드 변경

**이제 더욱 직관적이고 효율적인 GAIA-BT GPT를 경험하세요!** 🧬✨