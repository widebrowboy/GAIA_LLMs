# 근육 관련 건강기능식품 연구 시스템 사용 가이드

이 가이드는 근육 관련 건강기능식품 연구 컴퓨터에 추가된 새로운 기능과 사용법을 설명합니다.

<div align="center">

**최신 버전: 1.2.0 (2025-06-10)**
</div>

## 최근 추가된 기능

### 1. 디버그 모드 토글 (v1.2.0 핵심 기능)

디버그 모드를 사용하면 컴퓨터의 동작과 응답 생성 과정에 관한 자세한 정보를 볼 수 있습니다. 실행 중에도 언제든지 토글하여 필요한 상황에만 활성화할 수 있습니다.

#### 사용법

컴퓨터 실행 중 언제든 다음 명령어를 입력하여 디버그 모드를 활성화/비활성화할 수 있습니다:

```
/debug
```

#### 기능 및 제공 정보

- **실시간 토글**: 디버그 모드를 활성화/비활성화 상태를 바로 바꿉니다.
- **질문 처리 정보**: 입력된 질문의 처리 정보와 미리보기를 확인할 수 있습니다.
- **모델 정보**: 현재 사용 중인 Ollama 모델을 확인할 수 있습니다 (`Gemma3:latest` 등).
- **응답 상태 정보**: 응답 생성 길이, 시작 부분, 이전 응답과의 비교 등이 표시됩니다.
- **오류 정보**: 오류 발생 시 API 호출 실패, 응답 생성 중단 등 상세한 오류 정보가 표시됩니다.

#### 사용 예제

디버그 모드 켜기:
```
> /debug
[green]디버그 모드가 켜짐으로 설정되었습니다.[/green]
```

디버그 모드에서 질문 응답:
```
> 근육 발달에 좋은 보충제는 무엇인가요?
[디버그] 질문 처리 중: 근육 발달에 좋은 보충제는 무엇인가요?...
[디버그] 현재 모델: Gemma3:latest
[디버그] API 요청 매개변수: 온도=0.7, 토큰수=4096
[디버그] 응답 생성 중...
[디버그] 응답 길이: 2483 자
[디버그] 응답 시작: # 근육 발달에 도움이 되는 보충제...

--- AI 응답 시작 ---
(응답 내용)
--- AI 응답 종료 ---
```

디버그 모드 끄기:
```
> /debug
[yellow]디버그 모드가 꺼짐으로 설정되었습니다.[/yellow]
```

### 2. 모델 우선순위 및 자동 전환 (v1.2.0)

시스템은 가장 적합한 모델을 자동으로 검색하여 사용합니다. 최적의 응답을 제공하기 위해 다음과 같은 우선순위를 적용합니다.

#### 자동 모델 선택 방식

1. **최우선 선택**: `Gemma3:latest`
   - 최신 모델로 최고의 성능과 응답 품질을 제공합니다.
   - 이 모델이 있으면 무조건 이 모델을 사용합니다.

2. **자동 폴백**: 설치된 다른 모델
   - `Gemma3:latest`가 없는 경우, 다음 순서로 확인합니다:
     * `txgemma-predict:latest`
     * `txgemma-chat:latest`
     * 그 외 사용 가능한 Ollama 모델
   - 모델이 검출되면 해당 모델을 자동으로 사용합니다.

3. **모델 상태 확인**:
   - 디버그 모드에서 `[디버그] 현재 모델: {model_name}`로 표시됩니다.
   - `/settings` 명령어로도 확인 가능합니다.

#### 수동 모델 변경

원하는 다른 모델을 사용하려면 다음 명령어를 입력합니다:

```
/model <모델명>
```

**사용 예시:**
```
> /model txgemma-predict:latest
[활성화] 모델이 'txgemma-predict:latest'로 변경되었습니다.
```

**원본 모델로 반환:**
```
> /model Gemma3:latest
[활성화] 모델이 'Gemma3:latest'로 변경되었습니다.
```

### 3. 저장 프롬프트 개선 (v1.2.0)

연구 검색 결과를 생성한 후, 사용자 형편성이 향상된 저장 프롬프트 기능을 사용할 수 있습니다.

#### 저장 프롬프트 조작

응답이 생성된 후 "이 결과를 저장하시겠습니까? (y/n, 기본값=n):" 프롬프트가 표시됩니다. 다음과 같은 옵션이 있습니다:

- **저장하기**:
  - 영어: `y`, `yes`, `Y`, `YES`
  - 한글: `네`, `예`, `예스`
  - 단순히 `y` 키만 누르고 Enter를 누르면 됩니다.

- **건너뛰기**:
  - 영어: `n`, `no`, `N`, `NO`
  - 한글: `아니오`, `아니오`
  - 또는 아무것도 입력하지 않고 Enter 키를 누르면 됩니다.

#### 파일 저장 경로 및 표시

결과를 저장하면 다음과 같은 **절대 경로**가 표시됩니다:

```
연구 결과가 저장되었습니다: /home/user/GAIA_LLMs/research_outputs/20250610_102523_근육발달/20250610_102523_근육발달.md
```

이 결과는 다음 구조로 저장됩니다:
- 각 연구 결과는 고유한 폴더에 저장됩니다.
- 파일명은 시간과 질문의 핵심 키워드로 구성됩니다.
- 메타데이터는 별도의 `_meta.json` 파일로 저장됩니다.

#### 사용 예시

```
--- AI 응답 종료 ---

이 결과를 저장하시겠습니까? (y/n, 기본값=n): y

[저장중] 결과 저장 중...
[완료] 연구 결과가 저장되었습니다: /home/user/GAIA_LLMs/research_outputs/20250610_102523_근육발달/20250610_102523_근육발달.md
```

저장을 건너뛰는 경우:

```
--- AI 응답 종료 ---

이 결과를 저장하시겠습니까? (y/n, 기본값=n): 

[정보] 저장을 건너뛰습니다.
```

## 기본 명령어

| 명령어 | 설명 |
|---------|--------|
| `/help` | 도움말 표시 |
| `/exit`, `/quit` | 채팅봇 종료 |
| `/debug` | 디버그 모드 토글 |
| `/clear` | 화면 지우기 |
| `/settings` | 현재 설정 표시 |
| `/model` | 사용 모델 변경 |
| `/feedback` | 피드백 루프 실행 |

## 팁과 요령

1. **디버그 모드 효율적 사용**: 문제 해결 시에는 디버그 모드를 켜고, 일반 사용 시에는 끄는 것이 좋습니다.
2. **저장 경로 찾기**: 저장된 파일은 항상 `research_outputs` 폴더에 있으며, 절대 경로가 표시됩니다.
3. **모델 성능**: `Gemma3:latest` 모델이 가장 좋은 성능을 제공합니다.

## 자주 묻는 질문

**Q: 디버그 모드는 어떻게 설정해야 할까요?**
A: 채팅 세션 중 언제든지 `/debug` 명령어를 입력하여 켜거나 끌 수 있습니다.

**Q: 저장한 파일은 어디서 찾을 수 있나요?**
A: 기본적으로 `./research_outputs` 디렉토리에 저장됩니다. 저장 시 정확한 경로가 표시됩니다.

**Q: 모델을 변경할 수 있나요?**
A: `/model` 명령어 뒤에 원하는 모델명을 입력하여 변경할 수 있습니다.
